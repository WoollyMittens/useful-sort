/*
	Source:
	van Creij, Maurice (2012). "useful.sort.js: Simple table sorting functionality", version 20120606, http://www.woollymittens.nl/.

	License:
	This work is licensed under a Creative Commons Attribution 3.0 Unported License.

	Prerequisites:
	<script src="./js/useful.js"></script>
*/(function(e){"use strict";var t={};t={start:function(n,r){var i,s;r.parent=n;r.headers=e.css.select(r.headers,r.parent);r.links=[];for(i=0,s=r.headers.length;i<s;i+=1){r.links[i]=document.createElement("a");r.links[i].href="#";r.links[i].className="sort-none";r.links[i].innerHTML=r.headers[i].innerHTML;r.headers[i].innerHTML="";r.headers[i].appendChild(r.links[i]);t.events.click(r.links[i],r)}},update:function(n){var r,i,s,o,u,a=[];for(r=0,i=n.links.length;r<i;r+=1)n.active===r?n.links[r].className=n.direction>0?n.links[r].className.replace(/sort-up|sort-none/gi,"sort-down"):n.links[r].className.replace(/sort-down|sort-none/gi,"sort-up"):n.links[r].className=n.links[r].className.replace(/sort-up|sort-down/gi,"sort-none");s=e.css.select(n.rows,n.parent);for(r=0,i=s.length;r<i;r+=1)a[r]=s[r];o=t.guessType(e.css.select(n.cols,a[0])[n.active]);a.sort(function(e,r){return t.sortType(e,r,o,n)});for(r=0,i=a.length;r<i;r+=1){u=a[r].parentNode;a[r]=u.removeChild(a[r]);u.appendChild(a[r])}},guessType:function(e){var t;e.getElementsByTagName("time").length>0&&e.getElementsByTagName("time")[0].getAttribute("datetime")?t="html5time":isNaN(new Date(e.innerHTML.replace(/(<([^>]+)>)/ig,"")))?isNaN(parseFloat(e.innerHTML.replace(/(<([^>]+)>)/ig,"")))?e.getElementsByTagName("img").length>0&&e.getElementsByTagName("img")[0].alt?t="alt":e.getElementsByTagName("img").length>0&&e.getElementsByTagName("img")[0].title?t="title":e.innerHTML.replace(/(<([^>]+)>)/ig,"").match(/^\$?(\d{1,3}[ ,]?)*(\.\d{0,2})?$/gi)?t="currency":t="string":t="number":t="stringdate";return t},sortType:function(t,n,r,i){var s,o,u,a;s=e.css.select(i.cols,t)[i.active];o=e.css.select(i.cols,n)[i.active];switch(r){case"html5time":u=new Date(s.getElementsByTagName("time")[0].getAttribute("datetime"));a=new Date(o.getElementsByTagName("time")[0].getAttribute("datetime"));break;case"stringdate":u=new Date(s.innerHTML.replace(/(<([^>]+)>)/ig,""));a=new Date(o.innerHTML.replace(/(<([^>]+)>)/ig,""));break;case"number":u=parseFloat(s.innerHTML.replace(/(<([^>]+)>)/ig,""));a=parseFloat(o.innerHTML.replace(/(<([^>]+)>)/ig,""));break;case"currency":u=parseFloat(s.innerHTML.replace(/(<([^>]+)>)/ig,"").replace(/[^0-9-.]/ig,""));a=parseFloat(o.innerHTML.replace(/(<([^>]+)>)/ig,"").replace(/[^0-9-.]/ig,""));break;case"alt":u=s.getElementsByTagName("img")[0].alt;a=o.getElementsByTagName("img")[0].alt;break;case"title":u=s.getElementsByTagName("img")[0].title;a=o.getElementsByTagName("img")[0].title;break;default:u=s.innerHTML.replace(/(<([^>]+)>)/ig,"").toLowerCase();a=o.innerHTML.replace(/(<([^>]+)>)/ig,"").toLowerCase()}return i.direction>0?u>a:u<a},events:{click:function(e,n){e.onclick=function(){n.active=n.links.indexOf(e);n.direction=n.links[n.active].className.match(/sort-up|sort-none/gi)?1:-1;t.update(n);return!1}}}};e.models=e.models||{};e.models.clone=function(e){var t,n;if(typeof Object.create!="undefined")t=Object.create(e);else{n=function(){};n.prototype=e;t=new n}return t};e.css=e.css||{};e.css.select=function(t,n){var r,i,s;n=n||document;t=typeof t=="string"?{rule:t,parent:n}:t;t.parent=t.parent||document;t.data=t.data||{};s=typeof document.querySelectorAll!="undefined"?t.parent.querySelectorAll(t.rule):typeof jQuery!="undefined"?jQuery(t.parent).find(t.rule).get():[];if(typeof t.handler=="undefined")return s;for(r=0,i=s.length;r<i;r+=1)t.handler(s[r],e.models.clone(t.data))};e.sort={};e.sort.start=t.start})(window.useful=window.useful||{});